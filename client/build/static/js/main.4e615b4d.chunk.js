(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){e.exports=a(228)},174:function(e,t,a){},187:function(e,t){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},223:function(e,t,a){},225:function(e,t){},228:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(38),i=a.n(r),c=(a(174),a(61)),o=a(10),s=a(51),u=a(151),m=a.n(u),h=a(56),d=a(17),p=a.n(d),E=a(53),b=a.n(E),f=a(118),v=a(64),g=a(8),y=new function e(){var t=this;Object(v.a)(this,e),this.saveUser=function(e){p.a.saveSession(e),Object(g.runInAction)("Save user",function(){t.user=e})},this.removeUser=function(){p.a.deleteSession(),Object(g.runInAction)("Logout user",function(){t.user=null})},this.login=function(){var e=Object(f.a)(b.a.mark(function e(a){var n,l,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Object(g.runInAction)("Init Login",function(){t.loginError=!1}),n=a.username,l=a.password,!n||!l){e.next=8;break}return e.next=6,fetch("http://localhost:3001/login",{method:"POST",body:JSON.stringify({username:n,password:l}),headers:{"Content-Type":"application/json"}});case 6:(r=e.sent).ok&&r.text().then(function(e){t.saveUser(JSON.parse(e).user)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Object(g.runInAction)("Error Login",function(){t.loginError=e.t0.errors});case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),this.logout=Object(f.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(g.runInAction)("Init Logout",function(){t.logoutError=!1}),t.removeUser()}catch(a){Object(g.runInAction)("Error Logout",function(){t.logoutError=a.errors})}case 1:case"end":return e.stop()}},e)})),console.log("construct"),console.log(p.a.initialized),p.a.initialized||(console.log("initailizing"),p.a.initialize({name:"reference-generator"})),Object(g.extendObservable)(this,{user:null,loginError:!1,logoutError:!1,get loggedIn(){return null!==this.user&&p.a.hasSession}}),Object(g.runInAction)("Load user",Object(f.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("called "+p.a.initialized),e.next=3,p.a.getSession();case 3:t.user=e.sent;case 4:case"end":return e.stop()}},e)})))};a(198);var N=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),c=Object(s.a)(i,2),o=c[0],u=c[1];return l.a.createElement("div",{className:"base-container"},l.a.createElement("div",{className:"header"},"Login"),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"form"},l.a.createElement("form",{className:"form-group"},l.a.createElement("label",{htmlFor:"usename"},"Usename"),l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:a,onChange:function(e){return r(e.target.value)}})),l.a.createElement("form",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:o,onChange:function(e){return u(e.target.value)}})))),l.a.createElement("div",{className:"footer"},l.a.createElement("button",{className:"btn",type:"submit",onClick:function(){return y.login({username:a,password:o})}},"Login")))},O=Object(h.a)(function(){return p.a.initialized?p.a.hasSession?l.a.createElement(L,null):l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"login"},l.a.createElement(N,null))):null});var w=function(e){return l.a.createElement("div",{className:"container",style:e.style},e.children)};a(199);var k=function(e){return l.a.createElement("div",{className:"col-md-6 info-block"},l.a.createElement("h3",null,"Reference Generator"),l.a.createElement("div",{className:"colored-line"}),l.a.createElement("h2",null,"Best way to ",l.a.createElement("span",null,"get")," your ",l.a.createElement("span",null,"reference"),"list"),l.a.createElement("form",{className:"input-group mb-10",onSubmit:e.searchBook},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Book Author & URL",onChange:e.handleSearch}),l.a.createElement("button",{class:"btn btn-primary",type:"submit"},"Search")))};var j=function(e){return l.a.createElement("div",{className:"row"},e.children)},C=a(242),S=a(243),x=(a(200),a(239)),I=function(e){return console.log(e),l.a.createElement("div",null,l.a.createElement(C.a.Group,null,l.a.createElement(C.a,null,l.a.createElement(C.a.Content,null,l.a.createElement("form",{onSubmit:e.handleSubmit},l.a.createElement(C.a.Header,{as:"a"},e.title),l.a.createElement(C.a.Meta,null,l.a.createElement("strong",null,"Authors: "),e.authors),l.a.createElement(C.a.Description,null,"Description: ",e.description),l.a.createElement(C.a.Extra,null,l.a.createElement(S.a,{basic:!0,color:"green",href:e.previewLink,target:"_blank"},"Link to the Book"),l.a.createElement(S.a,{basic:!0,color:"red",type:"submit",value:"submit"},"Cite")))))),l.a.createElement(x.a,null))},L=Object(h.a)(function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),c=Object(s.a)(i,2),o=c[0],u=c[1],h=function(e){e.preventDefault(),console.log(e.target)};return p.a.initialized?p.a.hasSession?l.a.createElement("div",null,l.a.createElement(w,null,l.a.createElement("h1",null,"search"),l.a.createElement("div",{className:"featured-article-wrapper second-style"},l.a.createElement(w,null,l.a.createElement(j,null,l.a.createElement(k,{searchBook:function(e){e.preventDefault(),m.a.get("https://www.googleapis.com/books/v1/volumes").query({q:o}).then(function(e){console.log(e.body.items),r(e.body.items)})},handleSearch:function(e){e.preventDefault(),console.log(e.target.value),u(e.target.value)}}))),l.a.createElement(w,null,l.a.createElement(j,null,a.map(function(e,t){return l.a.createElement(I,{handleSubmit:h,key:t,title:e.volumeInfo.title,authors:[e.volumeInfo.authors],description:e.volumeInfo.description,previewLink:e.volumeInfo.previewLink})})))))):l.a.createElement(O,null):null}),P=a(105),A=a(110),F=a(106),D=a(115),B=a(153),U=a(240),z=a(129),T=a.n(z),J=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(l)))).state={firstName:"",lastName:"",year:"",title:"",edition:"",cityPublished:"",publisher:"",page:"",books:[]},a.componentDidMount=function(){a.getBook()},a.getBook=function(){T.a.get("/api/books/").then(function(e){var t=e.data;a.setState({posts:t}),console.log("Data has been received!!")}).catch(function(){alert("Error retrieving data!!!")})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(B.a)({},n,l))},a.resetUserInputs=function(){a.setState({firstName:"",lastName:"",year:"",title:"",edition:"",cityPublished:"",publisher:"",page:""})},a.submit=function(e){e.preventDefault();var t={firstName:a.state.firstName,lastName:a.state.lastName,year:a.state.year,title:a.state.title,edition:a.state.edition,cityPublished:a.state.cityPublished,publisher:a.state.publisher,page:a.state.page};T()({url:"/api/books/save",method:"POST",data:t}).then(function(){alert("Data has been sent to the server"),a.resetUserInputs()}).catch(function(){console.log("err")})},a}return Object(D.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return console.log("state:",this.state),l.a.createElement(U.a,{onSubmit:this.submit},l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"First Name"),l.a.createElement("input",{placeholder:"First Name",type:"text",name:"firstName",value:this.state.firstName,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{placeholder:"Last Name",type:"text",name:"lastName",value:this.state.lastName,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"Year of Published"),l.a.createElement("input",{placeholder:"Year",name:"year",value:this.state.year,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"Title"),l.a.createElement("input",{placeholder:"Title",type:"text",name:"title",value:this.state.title,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"Edition"),l.a.createElement("input",{placeholder:"Edition",type:"text",name:"edition",value:this.state.edition,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"City published"),l.a.createElement("input",{placeholder:"City published",type:"text",name:"cityPublished",value:this.state.cityPublished,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"Publisher"),l.a.createElement("input",{placeholder:"Publisher",type:"text",name:"publisher",value:this.state.publisher,onChange:this.handleChange})),l.a.createElement(U.a.Field,null,l.a.createElement("label",null,"Pages used"),l.a.createElement("input",{placeholder:"Pages used",type:"text",name:"page",value:this.state.page,onChange:this.handleChange})),l.a.createElement(S.a,{type:"submit"},"Submit"))}}]),t}(l.a.Component),M=function(e){function t(){return Object(v.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"services-wrapper style-two"},l.a.createElement(w,null,l.a.createElement("div",{className:"section-title"},l.a.createElement("h2",null,l.a.createElement("span",null,"Add in ")," any additional information you have about your source")),l.a.createElement(J,null)))}}]),t}(l.a.Component),G=a(245),R=a(241),q=a(82),H=function(e){return l.a.createElement(C.a.Group,null,l.a.createElement(C.a.Content,null,l.a.createElement(C.a.Header,{as:"a"},"title"),l.a.createElement("div",null,l.a.createElement(q.a,{link:!0,name:"close",type:"button"})),l.a.createElement(C.a.Description,null,l.a.createElement("p",null,e.firstName," ",e.lastName,". ",e.year,",",e.title,", ",e.edition,", ",e.cityPublished,", ",e.publisher,", ",e.page))))},Y=Object(h.a)(function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){fetch("/api/books").then(function(e){return e.json()}).then(function(e){return r(e)})},[]),p.a.initialized?p.a.hasSession?l.a.createElement(w,null,l.a.createElement(j,null,l.a.createElement(G.a,null,"Bibliography"),l.a.createElement(R.a,null),a.map(function(e,t){return l.a.createElement(H,{key:t,firstName:e.firstName,lastName:e.lastName,year:e.year,title:e.title,edition:e.edition,cityPublished:e.cityPublished,publisher:e.publisher,page:e.page})}))):l.a.createElement(O,null):null});a(223);var _=function(){return l.a.createElement("div",{style:{height:"120px"}},l.a.createElement("header",{id:"main-header"},l.a.createElement(w,null,l.a.createElement(j,null,l.a.createElement("div",{className:"site-branding col-md-3 col-xs-6"},l.a.createElement("a",{href:"#"},"F",l.a.createElement("span",null,"A"),"M")),l.a.createElement("div",{id:"site-navigation",className:"col-md-8 header-primary"},l.a.createElement("ul",{id:"main-menu"},l.a.createElement("li",{className:"menu-item "},l.a.createElement(c.b,{className:"/search"===window.location.pathname?"nav-link active":"nav-link",to:"./search"},"Search")),l.a.createElement("li",{className:"menu-item"},l.a.createElement(c.b,{className:"/manualadd"===window.location.pathname?"nav-link active":"nav-link",to:"./manualadd"},"Manually Add in")),l.a.createElement("li",{className:"menu-item active"},l.a.createElement(c.b,{className:"/bibliography"===window.location.pathname?"nav-link active":"nav-link",to:"./bibliography"},"Reference List")),l.a.createElement("li",{className:"menu-item active"},l.a.createElement(c.b,{className:"/"===window.location.pathname?"nav-link active":"nav-link",to:"./",onClick:function(){return y.logout()}},"Logout"))))))))};a(225);var K=function(){return console.log("App started"),l.a.createElement(c.a,null,l.a.createElement("div",null,l.a.createElement(_,null),l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:["/","/search"]},l.a.createElement(L,null)),l.a.createElement(o.a,{exact:!0,path:"/manualadd"},l.a.createElement(M,null)),l.a.createElement(o.a,{exact:!0,path:"/bibliography"},l.a.createElement(Y,null)),l.a.createElement(o.a,{exact:!0,path:"/login"},l.a.createElement(O,null)))))};a(226),a(227);i.a.render(l.a.createElement(K,null),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.4e615b4d.chunk.js.map